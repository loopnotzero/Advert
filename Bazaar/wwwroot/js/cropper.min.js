/*!
 * Cropper.js v1.4.3
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2018-10-24T13:07:15.032Z
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Cropper=t()})(this,function(){"use strict";function st(n){return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},st(n)}function hr(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function fi(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function cr(n,t,i){return t&&fi(n.prototype,t),i&&fi(n,i),n}function at(n){return lr(n)||ar(n)||vr()}function lr(n){if(Array.isArray(n)){for(var t=0,i=new Array(n.length);t<n.length;t++)i[t]=n[t];return i}}function ar(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}function vr(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function n(n){return typeof n=="number"&&!gr(n)}function ti(n){return typeof n=="undefined"}function w(n){return st(n)==="object"&&n!==null}function k(n){if(!w(n))return!1;try{var t=n.constructor,i=t.prototype;return t&&i&&nu.call(i,"isPrototypeOf")}catch(r){return!1}}function e(n){return typeof n=="function"}function r(t,i){if(t&&e(i))if(Array.isArray(t)||n(t.length)){for(var u=t.length,r=0;r<u;r+=1)if(i.call(t,t[r],r,t)===!1)break}else w(t)&&Object.keys(t).forEach(function(n){i.call(t,t[n],n,t)});return t}function d(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e11;return tu.test(n)?Math.round(n*t)/t:n}function a(t,i){var u=t.style;r(i,function(t,i){iu.test(i)&&n(t)&&(t+="px");u[i]=t})}function ru(n,t){return n.classList?n.classList.contains(t):n.className.indexOf(t)>-1}function u(t,i){if(i){if(n(t.length)){r(t,function(n){u(n,i)});return}if(t.classList){t.classList.add(i);return}var f=t.className.trim();f?f.indexOf(i)<0&&(t.className="".concat(f," ").concat(i)):t.className=i}}function c(t,i){if(i){if(n(t.length)){r(t,function(n){c(n,i)});return}if(t.classList){t.classList.remove(i);return}t.className.indexOf(i)>=0&&(t.className=t.className.replace(i,""))}}function g(t,i,f){if(i){if(n(t.length)){r(t,function(n){g(n,i,f)});return}f?u(t,i):c(t,i)}}function ii(n){return n.replace(uu,"$1-$2").toLowerCase()}function ri(n,t){return w(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-".concat(ii(t)))}function et(n,t,i){w(i)?n[t]=i:n.dataset?n.dataset[t]=i:n.setAttribute("data-".concat(ii(t)),i)}function fu(n,t){if(w(n[t]))try{delete n[t]}catch(i){n[t]=undefined}else if(n.dataset)try{delete n.dataset[t]}catch(i){n.dataset[t]=undefined}else n.removeAttribute("data-".concat(ii(t)))}function h(n,t,i){var u=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},r=i;t.trim().split(ir).forEach(function(t){if(!rr){var f=n.listeners;f&&f[t]&&f[t][i]&&(r=f[t][i],delete f[t][i],Object.keys(f[t]).length===0&&delete f[t],Object.keys(f).length===0&&delete n.listeners)}n.removeEventListener(t,r,u)})}function o(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},u=i;t.trim().split(ir).forEach(function(t){if(r.once&&!rr){var e=n.listeners,f=e===void 0?{}:e;u=function(){delete f[t][i];n.removeEventListener(t,u,r);for(var o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];i.apply(n,s)};f[t]||(f[t]={});f[t][i]&&n.removeEventListener(t,f[t][i],r);f[t][i]=u;n.listeners=f}n.addEventListener(t,u,r)})}function nt(n,t,i){var r;return e(Event)&&e(CustomEvent)?r=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!0,!0,i)),n.dispatchEvent(r)}function ur(n){var t=n.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}function fr(n){var t=n.match(eu);return t&&(t[1]!==ui.protocol||t[2]!==ui.hostname||t[3]!==ui.port)}function er(n){var t="timestamp=".concat((new Date).getTime());return n+(n.indexOf("?")===-1?"?":"&")+t}function ot(t){var u=t.rotate,f=t.scaleX,e=t.scaleY,o=t.translateX,s=t.translateY,i=[],r;return n(o)&&o!==0&&i.push("translateX(".concat(o,"px)")),n(s)&&s!==0&&i.push("translateY(".concat(s,"px)")),n(u)&&u!==0&&i.push("rotate(".concat(u,"deg)")),n(f)&&f!==1&&i.push("scaleX(".concat(f,")")),n(e)&&e!==1&&i.push("scaleY(".concat(e,")")),r=i.length?i.join(" "):"none",{WebkitTransform:r,msTransform:r,transform:r}}function ou(n){var u=t({},n),i=[];return r(n,function(n,t){delete u[t];r(u,function(t){var r=Math.abs(n.startX-t.startX),u=Math.abs(n.startY-t.startY),f=Math.abs(n.endX-t.endX),e=Math.abs(n.endY-t.endY),o=Math.sqrt(r*r+u*u),s=Math.sqrt(f*f+e*e),h=(s-o)/o;i.push(h)})}),i.sort(function(n,t){return Math.abs(n)<Math.abs(t)}),i[0]}function lt(n,i){var r=n.pageX,u=n.pageY,f={endX:r,endY:u};return i?f:t({startX:r,startY:u},f)}function su(n){var t=0,i=0,u=0;return r(n,function(n){var r=n.startX,f=n.startY;t+=r;i+=f;u+=1}),t/=u,i/=u,{pageX:t,pageY:i}}function v(n){var r=n.aspectRatio,i=n.height,t=n.width,e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"contain",u=function(n){return hu(n)&&n>0},f;return u(t)&&u(i)?(f=i*r,e==="contain"&&f>t||e==="cover"&&f<t?i=t/r:t=i*r):u(t)?i=t/r:u(i)&&(t=i*r),{width:t,height:i}}function cu(n){var i=n.width,r=n.height,t=n.degree;if(t=Math.abs(t)%180,t===90)return{width:r,height:i};var u=t%90*Math.PI/180,f=Math.sin(u),e=Math.cos(u),o=i*e+r*f,s=i*f+r*e;return t>90?{width:s,height:o}:{width:o,height:s}}function lu(n,t,i,r){var s=t.aspectRatio,lt=t.naturalWidth,vt=t.naturalHeight,h=t.rotate,yt=h===void 0?0:h,c=t.scaleX,pt=c===void 0?1:c,l=t.scaleY,wt=l===void 0?1:l,a=i.aspectRatio,bt=i.naturalWidth,kt=i.naturalHeight,y=r.fillColor,dt=y===void 0?"transparent":y,p=r.imageSmoothingEnabled,gt=p===void 0?!0:p,w=r.imageSmoothingQuality,ni=w===void 0?"low":w,b=r.maxWidth,k=b===void 0?Infinity:b,g=r.maxHeight,nt=g===void 0?Infinity:g,tt=r.minWidth,it=tt===void 0?0:tt,rt=r.minHeight,ut=rt===void 0?0:rt,f=document.createElement("canvas"),u=f.getContext("2d"),ft=v({aspectRatio:a,width:k,height:nt}),et=v({aspectRatio:a,width:it,height:ut},"cover"),e=Math.min(ft.width,Math.max(et.width,bt)),o=Math.min(ft.height,Math.max(et.height,kt)),ot=v({aspectRatio:s,width:k,height:nt}),st=v({aspectRatio:s,width:it,height:ut},"cover"),ht=Math.min(ot.width,Math.max(st.width,lt)),ct=Math.min(ot.height,Math.max(st.height,vt)),ti=[-ht/2,-ct/2,ht,ct];return f.width=d(e),f.height=d(o),u.fillStyle=dt,u.fillRect(0,0,e,o),u.save(),u.translate(e/2,o/2),u.rotate(yt*Math.PI/180),u.scale(pt,wt),u.imageSmoothingEnabled=gt,u.imageSmoothingQuality=ni,u.drawImage.apply(u,[n].concat(at(ti.map(function(n){return Math.floor(d(n))})))),u.restore(),f}function au(n,t,i){var u="",r;for(i+=t,r=t;r<i;r+=1)u+=or(n.getUint8(r));return u}function yu(n){var f=n.replace(vu,""),t=atob(f),i=new ArrayBuffer(t.length),u=new Uint8Array(i);return r(u,function(n,i){u[i]=t.charCodeAt(i)}),i}function pu(n,t){for(var r=[],u=8192,i=new Uint8Array(n);i.length>0;)r.push(or.apply(void 0,at(i.subarray(0,u)))),i=i.subarray(u);return"data:".concat(t,";base64,").concat(btoa(r.join("")))}function wu(n){var t=new DataView(n),h,i,e,o,a,r,v,u,c,l,y,f,s;try{if(t.getUint8(0)===255&&t.getUint8(1)===216)for(a=t.byteLength,r=2;r+1<a;){if(t.getUint8(r)===255&&t.getUint8(r+1)===225){e=r;break}r+=1}if(e&&(v=e+4,u=e+10,au(t,v,4)==="Exif"&&(c=t.getUint16(u),i=c===18761,(i||c===19789)&&t.getUint16(u+2,i)===42&&(l=t.getUint32(u+4,i),l>=8&&(o=u+l)))),o)for(y=t.getUint16(o,i),s=0;s<y;s+=1)if(f=o+s*12+2,t.getUint16(f,i)===274){f+=8;h=t.getUint16(f,i);t.setUint16(f,1,i);break}}catch(p){h=1}return h}function bu(n){var t=0,i=1,r=1;switch(n){case 2:i=-1;break;case 3:t=-180;break;case 4:r=-1;break;case 5:t=90;r=-1;break;case 6:t=90;break;case 7:t=90;i=-1;break;case 8:t=-90}return{rotate:t,scaleX:i,scaleY:r}}var ei=typeof window!="undefined",s=ei?window:{},i="cropper",vt="all",oi="crop",si="move",hi="zoom",y="e",p="w",b="s",l="n",tt="ne",it="nw",rt="se",ut="sw",yt="".concat(i,"-crop"),ci="".concat(i,"-disabled"),f="".concat(i,"-hidden"),li="".concat(i,"-hide"),yr="".concat(i,"-invisible"),ht="".concat(i,"-modal"),pt="".concat(i,"-move"),ft="".concat(i,"Action"),ct="".concat(i,"Preview"),wt="crop",ai="move",vi="none",bt="crop",kt="cropend",dt="cropmove",gt="cropstart",yi="dblclick",pi=s.PointerEvent?"pointerdown":"touchstart mousedown",wi=s.PointerEvent?"pointermove":"touchmove mousemove",bi=s.PointerEvent?"pointerup pointercancel":"touchend touchcancel mouseup",ki="ready",di="resize",gi="wheel mousewheel DOMMouseScroll",ni="zoom",nr="image/jpeg",pr=/^(?:e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/,wr=/^data:/,br=/^data:image\/jpeg;base64,/,kr=/^(?:img|canvas)$/i,tr={viewMode:0,dragMode:wt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},dr='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"><\/div><\/div><div class="cropper-drag-box"><\/div><div class="cropper-crop-box"><span class="cropper-view-box"><\/span><span class="cropper-dashed dashed-h"><\/span><span class="cropper-dashed dashed-v"><\/span><span class="cropper-center"><\/span><span class="cropper-face"><\/span><span class="cropper-line line-e" data-cropper-action="e"><\/span><span class="cropper-line line-n" data-cropper-action="n"><\/span><span class="cropper-line line-w" data-cropper-action="w"><\/span><span class="cropper-line line-s" data-cropper-action="s"><\/span><span class="cropper-point point-e" data-cropper-action="e"><\/span><span class="cropper-point point-n" data-cropper-action="n"><\/span><span class="cropper-point point-w" data-cropper-action="w"><\/span><span class="cropper-point point-s" data-cropper-action="s"><\/span><span class="cropper-point point-ne" data-cropper-action="ne"><\/span><span class="cropper-point point-nw" data-cropper-action="nw"><\/span><span class="cropper-point point-sw" data-cropper-action="sw"><\/span><span class="cropper-point point-se" data-cropper-action="se"><\/span><\/div><\/div>',gr=Number.isNaN||s.isNaN,nu=Object.prototype.hasOwnProperty,t=Object.assign||function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return w(n)&&r.length>0&&r.forEach(function(t){w(t)&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n},tu=/\.\d*(?:0|9){12}\d*$/,iu=/^(?:width|height|left|top|marginLeft|marginTop)$/,uu=/([a-z\d])([A-Z])/g,ir=/\s\s*/,rr=function(){var n=!1;if(ei){var t=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return n=!0,t},set:function(n){t=n}});s.addEventListener("test",i,r);s.removeEventListener("test",i,r)}return n}(),ui=s.location,eu=/^(https?:)\/\/([^:/?#]+):?(\d*)/i,hu=Number.isFinite||s.isFinite,or=String.fromCharCode,vu=/^data:.*,/,ku={render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();this.cropped&&this.renderCropBox()},initContainer:function(){var i=this.element,r=this.options,e=this.container,t=this.cropper,n;u(t,f);c(i,f);n={width:Math.max(e.offsetWidth,Number(r.minContainerWidth)||200),height:Math.max(e.offsetHeight,Number(r.minContainerHeight)||100)};this.containerData=n;a(t,{width:n.width,height:n.height});u(i,f);c(t,f)},initCanvas:function(){var n=this.containerData,r=this.imageData,f=this.options.viewMode,s=Math.abs(r.rotate)%180==90,h=s?r.naturalHeight:r.naturalWidth,c=s?r.naturalWidth:r.naturalHeight,u=h/c,e=n.width,o=n.height,i;n.height*u>n.width?f===3?e=n.height*u:o=n.width/u:f===3?o=n.width/u:e=n.height*u;i={aspectRatio:u,naturalWidth:h,naturalHeight:c,width:e,height:o};i.left=(n.width-e)/2;i.top=(n.height-o)/2;i.oldLeft=i.left;i.oldTop=i.top;this.canvasData=i;this.limited=f===1||f===2;this.limitCanvas(!0,!0);this.initialImageData=t({},r);this.initialCanvasData=t({},i)},limitCanvas:function(n,t){var a=this.options,e=this.containerData,i=this.canvasData,f=this.cropBoxData,s=a.viewMode,o=i.aspectRatio,h=this.cropped&&f,r,u,y,c,l;n&&(r=Number(a.minCanvasWidth)||0,u=Number(a.minCanvasHeight)||0,s>1?(r=Math.max(r,e.width),u=Math.max(u,e.height),s===3&&(u*o>r?r=u*o:u=r/o)):s>0&&(r?r=Math.max(r,h?f.width:0):u?u=Math.max(u,h?f.height:0):h&&(r=f.width,u=f.height,u*o>r?r=u*o:u=r/o)),y=v({aspectRatio:o,width:r,height:u}),r=y.width,u=y.height,i.minWidth=r,i.minHeight=u,i.maxWidth=Infinity,i.maxHeight=Infinity);t&&(s>(h?0:1)?(c=e.width-i.width,l=e.height-i.height,i.minLeft=Math.min(0,c),i.minTop=Math.min(0,l),i.maxLeft=Math.max(0,c),i.maxTop=Math.max(0,l),h&&this.limited&&(i.minLeft=Math.min(f.left,f.left+(f.width-i.width)),i.minTop=Math.min(f.top,f.top+(f.height-i.height)),i.maxLeft=f.left,i.maxTop=f.top,s===2&&(i.width>=e.width&&(i.minLeft=Math.min(0,c),i.maxLeft=Math.max(0,c)),i.height>=e.height&&(i.minTop=Math.min(0,l),i.maxTop=Math.max(0,l))))):(i.minLeft=-i.width,i.minTop=-i.height,i.maxLeft=e.width,i.maxTop=e.height))},renderCanvas:function(n,i){var r=this.canvasData,u=this.imageData;if(i){var o=cu({width:u.naturalWidth*Math.abs(u.scaleX||1),height:u.naturalHeight*Math.abs(u.scaleY||1),degree:u.rotate||0}),f=o.width,e=o.height,s=r.width*(f/r.naturalWidth),h=r.height*(e/r.naturalHeight);r.left-=(s-r.width)/2;r.top-=(h-r.height)/2;r.width=s;r.height=h;r.aspectRatio=f/e;r.naturalWidth=f;r.naturalHeight=e;this.limitCanvas(!0,!1)}(r.width>r.maxWidth||r.width<r.minWidth)&&(r.left=r.oldLeft);(r.height>r.maxHeight||r.height<r.minHeight)&&(r.top=r.oldTop);r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth);r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight);this.limitCanvas(!1,!0);r.left=Math.min(Math.max(r.left,r.minLeft),r.maxLeft);r.top=Math.min(Math.max(r.top,r.minTop),r.maxTop);r.oldLeft=r.left;r.oldTop=r.top;a(this.canvas,t({width:r.width,height:r.height},ot({translateX:r.left,translateY:r.top})));this.renderImage(n);this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(n){var r=this.canvasData,i=this.imageData,u=i.naturalWidth*(r.width/r.naturalWidth),f=i.naturalHeight*(r.height/r.naturalHeight);t(i,{width:u,height:f,left:(r.width-u)/2,top:(r.height-f)/2});a(this.image,t({width:i.width,height:i.height},ot(t({translateX:i.left,translateY:i.top},i))));n&&this.output()},initCropBox:function(){var u=this.options,i=this.canvasData,r=u.aspectRatio||u.initialAspectRatio,f=Number(u.autoCropArea)||.8,n={width:i.width,height:i.height};r&&(i.height*r>i.width?n.height=n.width/r:n.width=n.height*r);this.cropBoxData=n;this.limitCropBox(!0,!0);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);n.width=Math.max(n.minWidth,n.width*f);n.height=Math.max(n.minHeight,n.height*f);n.left=i.left+(i.width-n.width)/2;n.top=i.top+(i.height-n.height)/2;n.oldLeft=n.left;n.oldTop=n.top;this.initialCropBoxData=t({},n)},limitCropBox:function(n,t){var c=this.options,u=this.containerData,r=this.canvasData,i=this.cropBoxData,l=this.limited,o=c.aspectRatio;if(n){var f=Number(c.minCropBoxWidth)||0,e=Number(c.minCropBoxHeight)||0,s=l?Math.min(u.width,r.width,r.width+r.left,u.width-r.left):u.width,h=l?Math.min(u.height,r.height,r.height+r.top,u.height-r.top):u.height;f=Math.min(f,u.width);e=Math.min(e,u.height);o&&(f&&e?e*o>f?e=f/o:f=e*o:f?e=f/o:e&&(f=e*o),h*o>s?h=s/o:s=h*o);i.minWidth=Math.min(f,s);i.minHeight=Math.min(e,h);i.maxWidth=s;i.maxHeight=h}t&&(l?(i.minLeft=Math.max(0,r.left),i.minTop=Math.max(0,r.top),i.maxLeft=Math.min(u.width,r.left+r.width)-i.width,i.maxTop=Math.min(u.height,r.top+r.height)-i.height):(i.minLeft=0,i.minTop=0,i.maxLeft=u.width-i.width,i.maxTop=u.height-i.height))},renderCropBox:function(){var i=this.options,r=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft);(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop);n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth);n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight);this.limitCropBox(!1,!0);n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft);n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop);n.oldLeft=n.left;n.oldTop=n.top;i.movable&&i.cropBoxMovable&&et(this.face,ft,n.width>=r.width&&n.height>=r.height?si:vt);a(this.cropBox,t({width:n.width,height:n.height},ot({translateX:n.left,translateY:n.top})));this.cropped&&this.limited&&this.limitCanvas(!0,!0);this.disabled||this.output()},output:function(){this.preview();nt(this.element,bt,this.getData())}},du={initPreview:function(){var t=this.crossOrigin,n=this.options.preview,f=t?this.crossOriginUrl:this.url,u=document.createElement("img"),i;(t&&(u.crossOrigin=t),u.src=f,this.viewBox.appendChild(u),this.viewBoxImage=u,n)&&(i=n,typeof n=="string"?i=this.element.ownerDocument.querySelectorAll(n):n.querySelector&&(i=[n]),this.previews=i,r(i,function(n){var i=document.createElement("img");et(n,ct,{width:n.offsetWidth,height:n.offsetHeight,html:n.innerHTML});t&&(i.crossOrigin=t);i.src=f;i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';n.innerHTML="";n.appendChild(i)}))},resetPreview:function(){r(this.previews,function(n){var t=ri(n,ct);a(n,{width:t.width,height:t.height});n.innerHTML=t.html;fu(n,ct)})},preview:function(){var n=this.imageData,e=this.canvasData,i=this.cropBoxData,u=i.width,f=i.height,o=n.width,s=n.height,h=i.left-e.left-n.left,c=i.top-e.top-n.top;this.cropped&&!this.disabled&&(a(this.viewBoxImage,t({width:o,height:s},ot(t({translateX:-h,translateY:-c},n)))),r(this.previews,function(i){var v=ri(i,ct),y=v.width,e=v.height,p=y,l=e,r=1;u&&(r=y/u,l=f*r);f&&l>e&&(r=e/f,p=u*r,l=e);a(i,{width:p,height:l});a(i.getElementsByTagName("img")[0],t({width:o*r,height:s*r},ot(t({translateX:-h*r,translateY:-c*r},n))))}))}},gu={bind:function(){var t=this.element,n=this.options,i=this.cropper;e(n.cropstart)&&o(t,gt,n.cropstart);e(n.cropmove)&&o(t,dt,n.cropmove);e(n.cropend)&&o(t,kt,n.cropend);e(n.crop)&&o(t,bt,n.crop);e(n.zoom)&&o(t,ni,n.zoom);o(i,pi,this.onCropStart=this.cropStart.bind(this));n.zoomable&&n.zoomOnWheel&&o(i,gi,this.onWheel=this.wheel.bind(this));n.toggleDragModeOnDblclick&&o(i,yi,this.onDblclick=this.dblclick.bind(this));o(t.ownerDocument,wi,this.onCropMove=this.cropMove.bind(this));o(t.ownerDocument,bi,this.onCropEnd=this.cropEnd.bind(this));n.responsive&&o(window,di,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,n=this.options,i=this.cropper;e(n.cropstart)&&h(t,gt,n.cropstart);e(n.cropmove)&&h(t,dt,n.cropmove);e(n.cropend)&&h(t,kt,n.cropend);e(n.crop)&&h(t,bt,n.crop);e(n.zoom)&&h(t,ni,n.zoom);h(i,pi,this.onCropStart);n.zoomable&&n.zoomOnWheel&&h(i,gi,this.onWheel);n.toggleDragModeOnDblclick&&h(i,yi,this.onDblclick);h(t.ownerDocument,wi,this.onCropMove);h(t.ownerDocument,bi,this.onCropEnd);n.responsive&&h(window,di,this.onResize)}},nf={resize:function(){var n=this.options,e=this.container,t=this.containerData,o=Number(n.minContainerWidth)||200,s=Number(n.minContainerHeight)||100,i,u,f;this.disabled||t.width<=o||t.height<=s||(i=e.offsetWidth/t.width,(i!==1||e.offsetHeight!==t.height)&&(n.restore&&(u=this.getCanvasData(),f=this.getCropBoxData()),this.render(),n.restore&&(this.setCanvasData(r(u,function(n,t){u[t]=n*i})),this.setCropBoxData(r(f,function(n,t){f[t]=n*i})))))},dblclick:function(){this.disabled||this.options.dragMode===vi||this.setDragMode(ru(this.dragBox,yt)?ai:wt)},wheel:function(n){var i=this,r=Number(this.options.wheelZoomRatio)||.1,t=1;this.disabled||(n.preventDefault(),this.wheeling)||(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),n.deltaY?t=n.deltaY>0?1:-1:n.wheelDelta?t=-n.wheelDelta/120:n.detail&&(t=n.detail>0?1:-1),this.zoom(-t*r,n))},cropStart:function(n){if(!this.disabled){var f=this.options,i=this.pointers,t;(n.changedTouches?r(n.changedTouches,function(n){i[n.identifier]=lt(n)}):i[n.pointerId||0]=lt(n),t=Object.keys(i).length>1&&f.zoomable&&f.zoomOnTouch?hi:ri(n.target,ft),pr.test(t))&&nt(this.element,gt,{originalEvent:n,action:t})!==!1&&(n.preventDefault(),this.action=t,this.cropping=!1,t===oi&&(this.cropping=!0,u(this.dragBox,ht)))}},cropMove:function(n){var u=this.action,i;!this.disabled&&u&&(i=this.pointers,n.preventDefault(),nt(this.element,dt,{originalEvent:n,action:u})!==!1)&&(n.changedTouches?r(n.changedTouches,function(n){t(i[n.identifier]||{},lt(n,!0))}):t(i[n.pointerId||0]||{},lt(n,!0)),this.change(n))},cropEnd:function(n){if(!this.disabled){var i=this.action,t=this.pointers;(n.changedTouches?r(n.changedTouches,function(n){delete t[n.identifier]}):delete t[n.pointerId||0],i)&&(n.preventDefault(),Object.keys(t).length||(this.action=""),this.cropping&&(this.cropping=!1,g(this.dragBox,ht,this.cropped&&this.options.modal)),nt(this.element,kt,{originalEvent:n,action:i}))}}},tf={change:function(n){var at=this.options,ot=this.canvasData,ht=this.containerData,a=this.cropBoxData,ct=this.pointers,h=this.action,s=at.aspectRatio,o=a.left,e=a.top,i=a.width,u=a.height,et=o+i,g=e+u,nt=0,k=0,ft=ht.width,d=ht.height,v=!0,lt;!s&&n.shiftKey&&(s=i&&u?i/u:1);this.limited&&(nt=a.minLeft,k=a.minTop,ft=nt+Math.min(ht.width,ot.width,ot.left+ot.width),d=k+Math.min(ht.height,ot.height,ot.top+ot.height));var st=ct[Object.keys(ct)[0]],t={x:st.endX-st.startX,y:st.endY-st.startY},w=function(n){switch(n){case y:et+t.x>ft&&(t.x=ft-et);break;case p:o+t.x<nt&&(t.x=nt-o);break;case l:e+t.y<k&&(t.y=k-e);break;case b:g+t.y>d&&(t.y=d-g)}};switch(h){case vt:o+=t.x;e+=t.y;break;case y:if(t.x>=0&&(et>=ft||s&&(e<=k||g>=d))){v=!1;break}w(y);i+=t.x;i<0&&(h=p,i=-i,o-=i);s&&(u=i/s,e+=(a.height-u)/2);break;case l:if(t.y<=0&&(e<=k||s&&(o<=nt||et>=ft))){v=!1;break}w(l);u-=t.y;e+=t.y;u<0&&(h=b,u=-u,e-=u);s&&(i=u*s,o+=(a.width-i)/2);break;case p:if(t.x<=0&&(o<=nt||s&&(e<=k||g>=d))){v=!1;break}w(p);i-=t.x;o+=t.x;i<0&&(h=y,i=-i,o-=i);s&&(u=i/s,e+=(a.height-u)/2);break;case b:if(t.y>=0&&(g>=d||s&&(o<=nt||et>=ft))){v=!1;break}w(b);u+=t.y;u<0&&(h=l,u=-u,e-=u);s&&(i=u*s,o+=(a.width-i)/2);break;case tt:if(s){if(t.y<=0&&(e<=k||et>=ft)){v=!1;break}w(l);u-=t.y;e+=t.y;i=u*s}else w(l),w(y),t.x>=0?et<ft?i+=t.x:t.y<=0&&e<=k&&(v=!1):i+=t.x,t.y<=0?e>k&&(u-=t.y,e+=t.y):(u-=t.y,e+=t.y);i<0&&u<0?(h=ut,u=-u,i=-i,e-=u,o-=i):i<0?(h=it,i=-i,o-=i):u<0&&(h=rt,u=-u,e-=u);break;case it:if(s){if(t.y<=0&&(e<=k||o<=nt)){v=!1;break}w(l);u-=t.y;e+=t.y;i=u*s;o+=a.width-i}else w(l),w(p),t.x<=0?o>nt?(i-=t.x,o+=t.x):t.y<=0&&e<=k&&(v=!1):(i-=t.x,o+=t.x),t.y<=0?e>k&&(u-=t.y,e+=t.y):(u-=t.y,e+=t.y);i<0&&u<0?(h=rt,u=-u,i=-i,e-=u,o-=i):i<0?(h=tt,i=-i,o-=i):u<0&&(h=ut,u=-u,e-=u);break;case ut:if(s){if(t.x<=0&&(o<=nt||g>=d)){v=!1;break}w(p);i-=t.x;o+=t.x;u=i/s}else w(b),w(p),t.x<=0?o>nt?(i-=t.x,o+=t.x):t.y>=0&&g>=d&&(v=!1):(i-=t.x,o+=t.x),t.y>=0?g<d&&(u+=t.y):u+=t.y;i<0&&u<0?(h=tt,u=-u,i=-i,e-=u,o-=i):i<0?(h=rt,i=-i,o-=i):u<0&&(h=it,u=-u,e-=u);break;case rt:if(s){if(t.x>=0&&(et>=ft||g>=d)){v=!1;break}w(y);i+=t.x;u=i/s}else w(b),w(y),t.x>=0?et<ft?i+=t.x:t.y>=0&&g>=d&&(v=!1):i+=t.x,t.y>=0?g<d&&(u+=t.y):u+=t.y;i<0&&u<0?(h=it,u=-u,i=-i,e-=u,o-=i):i<0?(h=ut,i=-i,o-=i):u<0&&(h=tt,u=-u,e-=u);break;case si:this.move(t.x,t.y);v=!1;break;case hi:this.zoom(ou(ct),n);v=!1;break;case oi:if(!t.x||!t.y){v=!1;break}lt=ur(this.cropper);o=st.startX-lt.left;e=st.startY-lt.top;i=a.minWidth;u=a.minHeight;t.x>0?h=t.y>0?rt:tt:t.x<0&&(o-=i,h=t.y>0?ut:it);t.y<0&&(e-=u);this.cropped||(c(this.cropBox,f),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}v&&(a.width=i,a.height=u,a.left=o,a.top=e,this.action=h,this.renderCropBox());r(ct,function(n){n.startX=n.endX;n.startY=n.endY})}},rf={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&u(this.dragBox,ht),c(this.cropBox,f),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=t({},this.initialImageData),this.canvasData=t({},this.initialCanvasData),this.cropBoxData=t({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(t(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),c(this.dragBox,ht),u(this.cropBox,f)),this},replace:function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1;return!this.disabled&&n&&(this.isImg&&(this.element.src=n),t?(this.url=n,this.image.src=n,this.ready&&(this.viewBoxImage.src=n,r(this.previews,function(t){t.getElementsByTagName("img")[0].src=n}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(n))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,c(this.cropper,ci)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,u(this.cropper,ci)),this},destroy:function(){var n=this.element;return n[i]?(n[i]=undefined,this.isImg&&this.replaced&&(n.src=this.originalUrl),this.uncreate(),this):this},move:function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:n,i=this.canvasData,r=i.left,u=i.top;return this.moveTo(ti(n)?n:r+Number(n),ti(t)?t:u+Number(t))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t,u=this.canvasData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(n(t)&&(u.left=t,r=!0),n(i)&&(u.top=i,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(n,t){var i=this.canvasData;return n=Number(n),n=n<0?1/(1-n):1+n,this.zoomTo(i.width*n/i.naturalWidth,null,t)},zoomTo:function(t,i,r){var v=this.options,u=this.canvasData,f=u.width,e=u.height,c=u.naturalWidth,y=u.naturalHeight,o,s;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&v.zoomable){if(o=c*t,s=y*t,nt(this.element,ni,{ratio:t,oldRatio:f/c,originalEvent:r})===!1)return this;if(r){var h=this.pointers,l=ur(this.cropper),a=h&&Object.keys(h).length?su(h):{pageX:r.pageX,pageY:r.pageY};u.left-=(o-f)*((a.pageX-l.left-u.left)/f);u.top-=(s-e)*((a.pageY-l.top-u.top)/e)}else k(i)&&n(i.x)&&n(i.y)?(u.left-=(o-f)*((i.x-u.left)/f),u.top-=(s-e)*((i.y-u.top)/e)):(u.left-=(o-f)/2,u.top-=(s-e)/2);u.width=o;u.height=s;this.renderCanvas(!0)}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n))},rotateTo:function(t){return t=Number(t),n(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,n(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(n(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:t,u=this.imageData,r=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(n(t)&&(u.scaleX=t,r=!0),n(i)&&(u.scaleY=i,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var h=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1,u=this.options,t=this.imageData,f=this.canvasData,i=this.cropBoxData,n,e,o,s;return this.ready&&this.cropped?(n={x:i.left-f.left,y:i.top-f.top,width:i.width,height:i.height},e=t.width/t.naturalWidth,r(n,function(t,i){n[i]=t/e}),h&&(o=Math.round(n.y+n.height),s=Math.round(n.x+n.width),n.x=Math.round(n.x),n.y=Math.round(n.y),n.width=s-n.x,n.height=o-n.y)):n={x:0,y:0,width:0,height:0},u.rotatable&&(n.rotate=t.rotate||0),u.scalable&&(n.scaleX=t.scaleX||1,n.scaleY=t.scaleY||1),n},setData:function(t){var e=this.options,i=this.imageData,o=this.canvasData,r={},u,f;return this.ready&&!this.disabled&&k(t)&&(u=!1,e.rotatable&&n(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,u=!0),e.scalable&&(n(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,u=!0),n(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,u=!0)),u&&this.renderCanvas(!0,!0),f=i.width/i.naturalWidth,n(t.x)&&(r.left=t.x*f+o.left),n(t.y)&&(r.top=t.y*f+o.top),n(t.width)&&(r.width=t.width*f),n(t.height)&&(r.height=t.height*f),this.setCropBoxData(r)),this},getContainerData:function(){return this.ready?t({},this.containerData):{}},getImageData:function(){return this.sized?t({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,n={};return this.ready&&r(["left","top","width","height","naturalWidth","naturalHeight"],function(i){n[i]=t[i]}),n},setCanvasData:function(t){var i=this.canvasData,r=i.aspectRatio;return this.ready&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)?(i.width=t.width,i.height=t.width/r):n(t.height)&&(i.height=t.height,i.width=t.height*r),this.renderCanvas(!0)),this},getCropBoxData:function(){var n=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:n.left,top:n.top,width:n.width,height:n.height}),t||{}},setCropBoxData:function(t){var i=this.cropBoxData,r=this.options.aspectRatio,u,f;return this.ready&&this.cropped&&!this.disabled&&k(t)&&(n(t.left)&&(i.left=t.left),n(t.top)&&(i.top=t.top),n(t.width)&&t.width!==i.width&&(u=!0,i.width=t.width),n(t.height)&&t.height!==i.height&&(f=!0,i.height=t.height),r&&(u?i.height=i.width/r:f&&(i.width=i.height*r)),this.renderCropBox()),this},getCroppedCanvas:function(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},it,r,l,e,ut,p;if(!this.ready||!window.HTMLCanvasElement)return null;if(it=this.canvasData,r=lu(this.image,this.imageData,it,n),!this.cropped)return r;var w=this.getData(),ft=w.x,et=w.y,u=w.width,s=w.height,f=r.width/Math.floor(it.naturalWidth);f!==1&&(ft*=f,et*=f,u*=f,s*=f);var rt=u/s,ot=v({aspectRatio:rt,width:n.maxWidth||Infinity,height:n.maxHeight||Infinity}),st=v({aspectRatio:rt,width:n.minWidth||0,height:n.minHeight||0},"cover"),ht=v({aspectRatio:rt,width:n.width||(f!==1?r.width:u),height:n.height||(f!==1?r.height:s)}),c=ht.width,b=ht.height;c=Math.min(ot.width,Math.max(st.width,c));b=Math.min(ot.height,Math.max(st.height,b));l=document.createElement("canvas");e=l.getContext("2d");l.width=d(c);l.height=d(b);e.fillStyle=n.fillColor||"transparent";e.fillRect(0,0,c,b);var ct=n.imageSmoothingEnabled,vt=ct===void 0?!0:ct,lt=n.imageSmoothingQuality;e.imageSmoothingEnabled=vt;lt&&(e.imageSmoothingQuality=lt);var k=r.width,g=r.height,t=ft,i=et,o,h,nt,tt,a,y;return t<=-u||t>k?(t=0,o=0,nt=0,a=0):t<=0?(nt=-t,t=0,o=Math.min(k,u+t),a=o):t<=k&&(nt=0,o=Math.min(u,k-t),a=o),o<=0||i<=-s||i>g?(i=0,h=0,tt=0,y=0):i<=0?(tt=-i,i=0,h=Math.min(g,s+i),y=h):i<=g&&(tt=0,h=Math.min(s,g-i),y=h),ut=[t,i,o,h],a>0&&y>0&&(p=c/u,ut.push(nt*p,tt*p,a*p,y*p)),e.drawImage.apply(e,[r].concat(at(ut.map(function(n){return Math.floor(d(n))})))),l},setAspectRatio:function(n){var t=this.options;return this.disabled||ti(n)||(t.aspectRatio=Math.max(0,n)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(n){var r=this.options,u=this.dragBox,f=this.face,t,i;return this.ready&&!this.disabled&&(t=n===wt,i=r.movable&&n===ai,n=t||i?n:vi,r.dragMode=n,et(u,ft,n),g(u,yt,t),g(u,pt,i),r.cropBoxMovable||(et(f,ft,n),g(f,yt,t),g(f,pt,i))),this}},uf=s.Cropper,sr=function(){function n(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(hr(this,n),!i||!kr.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i;this.options=t({},tr,k(r)&&r);this.cropped=!1;this.disabled=!1;this.pointers={};this.ready=!1;this.reloading=!1;this.replaced=!1;this.sized=!1;this.sizing=!1;this.init()}return cr(n,[{key:"init",value:function(){var n=this.element,r=n.tagName.toLowerCase(),t;if(!n[i]){if(n[i]=this,r==="img"){if(this.isImg=!0,t=n.getAttribute("src")||"",this.originalUrl=t,!t)return;t=n.src}else r==="canvas"&&window.HTMLCanvasElement&&(t=n.toDataURL());this.load(t)}}},{key:"load",value:function(n){var u=this,f,i,t,r;if(n){if(this.url=n,this.imageData={},f=this.element,i=this.options,i.rotatable||i.scalable||(i.checkOrientation=!1),!i.checkOrientation||!window.ArrayBuffer){this.clone();return}if(wr.test(n)){br.test(n)?this.read(yu(n)):this.clone();return}t=new XMLHttpRequest;r=this.clone.bind(this);this.reloading=!0;this.xhr=t;t.ontimeout=r;t.onabort=r;t.onerror=r;t.onprogress=function(){t.getResponseHeader("content-type")!==nr&&t.abort()};t.onload=function(){u.read(t.response)};t.onloadend=function(){u.reloading=!1;u.xhr=null};i.checkCrossOrigin&&fr(n)&&f.crossOrigin&&(n=er(n));t.open("GET",n);t.responseType="arraybuffer";t.withCredentials=f.crossOrigin==="use-credentials";t.send()}}},{key:"read",value:function(n){var r=this.options,i=this.imageData,u=wu(n),f=0,e=1,o=1,t;u>1&&(this.url=pu(n,nr),t=bu(u),f=t.rotate,e=t.scaleX,o=t.scaleY);r.rotatable&&(i.rotate=f);r.scalable&&(i.scaleX=e,i.scaleY=o);this.clone()}},{key:"clone",value:function(){var f=this.element,i=this.url,t,r,n;this.options.checkCrossOrigin&&fr(i)&&(t=f.crossOrigin,t?r=i:(t="anonymous",r=er(i)));this.crossOrigin=t;this.crossOriginUrl=r;n=document.createElement("img");t&&(n.crossOrigin=t);n.src=r||i;this.image=n;n.onload=this.start.bind(this);n.onerror=this.stop.bind(this);u(n,li);f.parentNode.insertBefore(n,f.nextSibling)}},{key:"start",value:function(){var r=this,i=this.isImg?this.element:this.image,u,f,n,e;if(i.onload=null,i.onerror=null,this.sizing=!0,u=s.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(s.navigator.userAgent),f=function(n,i){t(r.imageData,{naturalWidth:n,naturalHeight:i,aspectRatio:n/i});r.sizing=!1;r.sized=!0;r.build()},i.naturalWidth&&!u){f(i.naturalWidth,i.naturalHeight);return}n=document.createElement("img");e=document.body||document.documentElement;this.sizingImage=n;n.onload=function(){f(n.width,n.height);u||e.removeChild(n)};n.src=i.src;u||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",e.appendChild(n))}},{key:"stop",value:function(){var n=this.image;n.onload=null;n.onerror=null;n.parentNode.removeChild(n);this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var s=this.element,n=this.options,l=this.image,a=s.parentNode,v=document.createElement("div");v.innerHTML=dr;var t=v.querySelector(".".concat(i,"-container")),y=t.querySelector(".".concat(i,"-canvas")),p=t.querySelector(".".concat(i,"-drag-box")),r=t.querySelector(".".concat(i,"-crop-box")),h=r.querySelector(".".concat(i,"-face"));this.container=a;this.cropper=t;this.canvas=y;this.dragBox=p;this.cropBox=r;this.viewBox=t.querySelector(".".concat(i,"-view-box"));this.face=h;y.appendChild(l);u(s,f);a.insertBefore(t,s.nextSibling);this.isImg||c(l,li);this.initPreview();this.bind();n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN;n.aspectRatio=Math.max(0,n.aspectRatio)||NaN;n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0;u(r,f);n.guides||u(r.getElementsByClassName("".concat(i,"-dashed")),f);n.center||u(r.getElementsByClassName("".concat(i,"-center")),f);n.background&&u(t,"".concat(i,"-bg"));n.highlight||u(h,yr);n.cropBoxMovable&&(u(h,pt),et(h,ft,vt));n.cropBoxResizable||(u(r.getElementsByClassName("".concat(i,"-line")),f),u(r.getElementsByClassName("".concat(i,"-point")),f));this.render();this.ready=!0;this.setDragMode(n.dragMode);n.autoCrop&&this.crop();this.setData(n.data);e(n.ready)&&o(s,ki,n.ready,{once:!0});nt(s,ki)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),c(this.element,f))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=uf,n}},{key:"setDefaults",value:function(n){t(tr,k(n)&&n)}}]),n}();return t(sr.prototype,ku,du,gu,nf,tf,rf),sr});